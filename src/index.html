<!DOCTYPE html>
<html>
  <head>  
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width,user-scalable=no">

    <title><%= htmlWebpackPlugin.options.title %></title>

    <meta name="description" content="<%= htmlWebpackPlugin.options.title %>">

    <!-- GOOGLE CLIENT ID -->
    <meta name="google-signin-client_id" content="<%= htmlWebpackPlugin.options.metadata.googleClientId %>">
    <link rel="manifest" href="manifest.json">
    
    <!-- Configured Head Tags 
    <% if (webpackConfig.htmlElements.headTags) { %>

    <%= webpackConfig.htmlElements.headTags %>
    <% } %>
    -->

    <!-- base url -->
    <base href="<%= htmlWebpackPlugin.options.metadata.baseUrl %>">

    <% if (htmlWebpackPlugin.options.metadata.ENV === 'production') { %> <script> var ngDevMode = false; var ngI18nClosureMode; </script> <% } %>

    <script>
      if (typeof module === 'object') {window.module = module; module = undefined;}    
    </script>
    <!--
    <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script defer src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link rel="stylesheet" href="https://resources.ereflect.com/PrepEd/webApp/assets/css/angular2_mdl_ext_styles.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css">
    <link rel="stylesheet" href="//vjs.zencdn.net/5.11/video-js.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    -->
    
    <link rel="preload" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/MaterialIcons-Regular.woff2" as="font">    
    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/material-icons.css">
    
    <script src="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/jquery/jquery.min.js"></script>
    <script defer src="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/jquery/jquery-ui.min.js"></script>
    <script defer src="https://apis.google.com/js/platform.js?onload=onLoadCallback"></script>
    
    <!-- <script defer src="../node_modules/md-date-range-picker/src/md-date-range-picker.js"></script> -->
    <!--<link rel="stylesheet" href="https://resources.ereflect.com/Typesy/webApp/assets/css/roboto-font-face.css" type="text/css">-->    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">        
    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/angular2_mdl_ext_styles.min.css">
    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/material.indigo-blue.min.css">
    <!-- <link rel="stylesheet" href="https://resources.ereflect.com/Typesy/webApp/assets/css/video-js.min.css"> -->
    <!-- <script type="text/javascript" src="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/script/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:['corechart', 'bar', 'gauge']});
    </script> -->

    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/indigo-pink.css?sver=<%= htmlWebpackPlugin.options.metadata.baseVer %>">
    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>assets/css/<%= htmlWebpackPlugin.options.metadata.cssFileName %>?sver=<%= htmlWebpackPlugin.options.metadata.baseVer %>">    
  
    <!-- <script src="capacitor.js"></script> -->
    <!-- <script src="cordova.js"></script> -->

    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>libs/videojs/video-js.css">
    <script src="<%= htmlWebpackPlugin.options.metadata.cdnLocation %>libs/videojs/video.min.js"></script>

    <!-- TYPESY GOOGLE ANALYTICS -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){    
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),    
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)    
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');    
      ga('create', 'UA-408535-55', 'auto');
      ga('send', 'pageview');    
    </script>

    <script>if (window.module) module = window.module;</script>
  </head>

  <body>
    <app-root></app-root>
    <dialog-outlet></dialog-outlet>

    <script type="text/javascript">
      var google_tag_params = {

      };
    </script>

    <script type="text/javascript">
      /* <![CDATA[ */
      var google_conversion_id = 1068174001;
      var google_custom_params = window.google_tag_params;
      var google_remarketing_only = true;
      /* ]]> */
    </script>

    <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>

    <noscript>
      <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1068174001/?guid=ON&amp;script=0"/>
      </div>
    </noscript>

    <% if (htmlWebpackPlugin.options.metadata.isDevServer && htmlWebpackPlugin.options.metadata.HMR !== true) { %>
    <!-- Webpack Dev Server reload -->
    <script src="/webpack-dev-server.js"></script>
    <% } %>

<script type="text/javascript">
  var $zoho=$zoho || {};
  $zoho.salesiq = $zoho.salesiq || {widgetcode:"86840a641416b63ddd7ba4f7c4ee2ee5e4efe07675619b1f3c1217aa4cb21e93", values:{},ready:function(){}};
  var d=document;
  s=d.createElement("script");
  s.type="text/javascript";
  s.id="zsiqscript";
  s.defer=true;
  s.src="https://salesiq.zoho.com/widget";
  t=d.getElementsByTagName("script")[0];
  //t.parentNode.insertBefore(s,t);
  d.write("<div id='zsiqwidget'></div>");
  var chatWidgetDiv = d.createElement("div");
  var closeBtn = d.createElement("button");
  var closeIcon = d.createElement("i");
  var lcInitialized = false;
  
  $zoho.salesiq.ready = function()
  {
    $zoho.salesiq.floatbutton.visible("show");

    closeIcon.className = 'material-icons';
    closeIcon.textContent = 'close';
    closeBtn.className = 'close mdl-button mdl-js-button';
    closeBtn.appendChild(closeIcon);
    closeBtn.addEventListener('click', hide_live_chat);
    chatWidgetDiv.id = 'chat-widget';
    chatWidgetDiv.appendChild(closeBtn);
    d.body.appendChild(chatWidgetDiv);

  }

  function hide_live_chat() {    
    if ($zoho.salesiq.floatbutton != null) {
      $zoho.salesiq.floatbutton.visible("hide");
    }
    
    if (chatWidgetDiv.parentNode != null) {
      chatWidgetDiv.parentNode.removeChild(chatWidgetDiv);
    }
    
    minimize_live_chat();
    //s.parentNode.removeChild(s);
  }

  function minimize_live_chat() {
    var iframe = document.getElementById("siqiframe");
    if (iframe != null) {
      var innerDoc = iframe.contentWindow.document || iframe.contentDocument;
      if (innerDoc != null) {
        var elmnt = innerDoc.getElementsByClassName("sqico-min siq-minimize-icon")[0];
        if (elmnt != null) {
          console.log("MINIMIZING CHAT BOX NOW");
          elmnt.click();
        }
      }
    }
  }

  function live_chat()
  {
    var lcElement = d.getElementsByClassName("zls-sptwndw  siqembed siqtrans zsiq-mobhgt siq_rht zsiq_size2 siqanim");
    if (lcElement == null) return;
    var lcOpened = lcElement.length > 0;
      
    if (!t.parentNode.contains(s) && !lcOpened) {
      t.parentNode.insertBefore(s, t);
    }

    if ($zoho.salesiq.floatbutton && !lcOpened) {
      $zoho.salesiq.floatbutton.visible("show");
      d.body.appendChild(chatWidgetDiv);
    }

    var initLC = function() {
      var lc = d.getElementById("zsiq_float");        
      if (lc == null) {
        setTimeout(initLC, 1000);
      }
      if (lc && !lcOpened) {          
        lc.onclick = function() {            
          if (chatWidgetDiv.parentNode) chatWidgetDiv.parentNode.removeChild(chatWidgetDiv);

          setTimeout(function() {
            var minimizeBtn = d.getElementById("siqiframe").contentDocument.getElementsByClassName("actbtn")[0];              
            if (minimizeBtn) {
              minimizeBtn.onclick = function() {                  
                d.body.appendChild(chatWidgetDiv);
              }
            }
          }, 200);
        };
        if (lcInitialized) lc.click();
        lcInitialized = true;                       
      }
    };

    if (d.getElementById("zsiq_float")) {
      initLC();
    }
    else {
      setTimeout(initLC, 1000);
    }
  }
    
  // gapiPromise will be resolved when gapi is loaded
  var gapiPromise = (function() {
    var deferred = $.Deferred();
      window.onLoadCallback = function() {
        deferred.resolve(gapi);
      };
      return deferred.promise();
    }());
  </script>
  </body>
</html>